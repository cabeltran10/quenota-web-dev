(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),l=a.n(r),c=(a(16),a(2)),s=a(3),i=a(5),u=a(4),m=a(6),d=(a(8),a(1)),p=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={},a.logout=a.logout.bind(Object(d.a)(a)),a.capturaLogin=a.capturaLogin.bind(Object(d.a)(a)),a.capturaRegister=a.capturaRegister.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"capturaLogin",value:function(e){var t=this;e.preventDefault();var a=document.getElementsByName("user")[0].value,n=document.getElementsByName("pass")[0].value;console.log(a,n),fetch("http://localhost:3001/students/".concat(a)).then((function(e){return e.json()})).then((function(e){console.log(e),e.password===n&&(console.log("Loggin Exitoso"),localStorage.setItem("loggeado",!0),localStorage.setItem("email",a),console.log(localStorage.getItem("loggeado")),t.refresh())}))}},{key:"logout",value:function(e){localStorage.clear(),this.refresh()}},{key:"refresh",value:function(){window.location.reload(!0)}},{key:"capturaRegister",value:function(e){e.preventDefault();var t=document.getElementsByName("userRegister")[0].value,a=document.getElementsByName("nameRegister")[0].value,n=document.getElementsByName("passRegister")[0].value;console.log(t,a,n),fetch("http://localhost:3001/students",{method:"POST",body:JSON.stringify({mail:t,password:n,name:a}),headers:{Accept:"application/json","Content-Type":"application/json"}},this.refresh())}},{key:"render",value:function(){return null==localStorage.getItem("loggeado")?o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary fixed-top",role:"navigation"},o.a.createElement("div",{className:"container"},o.a.createElement("a",{className:"navbar-brand tittle",href:"/"},"QUE NOTA!"),o.a.createElement("button",{className:"navbar-toggler border-0",type:"button","data-toggle":"collapse","data-target":"#exCollapsingNavbar"},"\u2630"),o.a.createElement("div",{className:"collapse navbar-collapse",id:"exCollapsingNavbar"},o.a.createElement("ul",{className:"nav navbar-nav flex-row justify-content-between ml-auto"},o.a.createElement("li",{className:"dropdown order-1"},o.a.createElement("button",{type:"button",id:"dropdownMenu1","data-toggle":"dropdown",className:"btn btn-outline-light dropdown-toggle"},"Registarse",o.a.createElement("span",{className:"caret"})),o.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right mt-6"},o.a.createElement("li",{className:"px-2 py-2"},o.a.createElement("form",{className:"modificado2"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"userInput",className:"label-login"},"Usuario"),o.a.createElement("input",{id:"userInput",className:"form-control form-control-sm input-login",type:"text",required:"",name:"userRegister"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"passwordInput",className:"label-login"},"Nombre"),o.a.createElement("input",{id:"nameInput",className:"form-control form-control-sm input-login",type:"text",name:"nameRegister",required:""})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"passwordInput",className:"label-login"},"Contrase\xf1a"),o.a.createElement("input",{id:"passwordInput",className:"form-control form-control-sm input-login",type:"password",name:"passRegister",required:""})),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:this.capturaRegister},"Registrar")))))),o.a.createElement("li",{className:"dropdown order-1"},o.a.createElement("button",{type:"button",id:"dropdownMenu1","data-toggle":"dropdown",className:"btn btn-outline-light dropdown-toggle"},"Ingresar ",o.a.createElement("span",{className:"caret"})),o.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right mt-6"},o.a.createElement("li",{className:"px-2 py-2"},o.a.createElement("form",{className:"modificado"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"userInput",className:"label-login"},"Usuario"),o.a.createElement("input",{id:"userInput",className:"form-control form-control-sm input-login",type:"text",required:"",name:"user"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"passwordInput",className:"label-login"},"Contrase\xf1a"),o.a.createElement("input",{id:"passwordInput",className:"form-control form-control-sm input-login",type:"password",name:"pass",required:""})),o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",href:"/",onClick:this.capturaLogin},"Entrar"))))))))))):o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary fixed-top",role:"navigation"},o.a.createElement("div",{className:"container"},o.a.createElement("a",{className:"navbar-brand tittle",href:"/"},"QUE NOTA!"),o.a.createElement("button",{className:"navbar-toggler border-0",type:"button","data-toggle":"collapse","data-target":"#exCollapsingNavbar"},"\u2630"),o.a.createElement("div",{className:"collapse navbar-collapse",id:"exCollapsingNavbar"},o.a.createElement("ul",{className:"nav navbar-nav flex-row justify-content-between ml-auto"},o.a.createElement("li",{className:"dropdown order-1"},o.a.createElement("div",{className:"form-group"},o.a.createElement("button",{className:"btn btn-primary btn-block",href:"/",onClick:this.logout},"Salir"))))))),o.a.createElement("br",null))}}]),t}(o.a.Component),h=a(10),g=function(e){var t=e.nameGrade,a=e.currentGrade,n=e.percentage;return o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{class:"col-md-3 borde"},o.a.createElement("input",{type:"text",class:"form-control input-course",id:"nombreNota",name:"nombreNota",value:t,readOnly:!0})),o.a.createElement("div",{className:"col-md-3 borde"},o.a.createElement("input",{type:"text",class:"form-control input-course",id:"calificacionActual",name:"calificacionActual",value:a,readOnly:!0})),o.a.createElement("div",{className:"col-md-3 borde"},o.a.createElement("input",{type:"text",class:"form-control input-course",id:"porcentaje",name:"porcentaje",value:n,readOnly:!0}))))},b=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this));var n=e.idCourse;return console.log("const",n),a.state={grades:[],course:n,globalCourses:[],approximation:"",gradeObjective:"",allCourses:[]},a.addGrade=a.addGrade.bind(Object(d.a)(a)),a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.editCourse=a.editCourse.bind(Object(d.a)(a)),a.change=a.change.bind(Object(d.a)(a)),a.asignarNotasCurso=a.asignarNotasCurso.bind(Object(d.a)(a)),a.fetchGrades=a.fetchGrades.bind(Object(d.a)(a)),a.fetchGlobalCourses=a.fetchGlobalCourses.bind(Object(d.a)(a)),a.estadisticas=a.estadisticas.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchGrades(),this.fetchGlobalCourses()}},{key:"asignarNotasCurso",value:function(e,t,a,n,o){this.setState({grades:e,approximation:t,gradeObjective:a,nameCourse:n,_id:o})}},{key:"estadisticas",value:function(){var e=this.state.grades,t=0,a=0;e.forEach((function(e){a+=parseInt(e.percentage),t+=parseInt(e.percentage)*parseInt(e.currentGrade)})),console.log("Porcentajes: ",a,"Promedio",t/100,"Maxima nota",(t+5*(100-a))/100),alert("Porcentaje visto: "+a+"%\nPromedio (definitiva): "+t/100+"\nMaxima nota posible: "+(t+5*(100-a))/100)}},{key:"fetchGrades",value:function(){var e=this,t=this.state.course,a=[],n=[],o=localStorage.getItem("email");fetch("http://localhost:3001/students/".concat(o)).then((function(e){return e.json()})).then((function(o){o=o.courses,n=o,console.log("data-course",o);var r="",l="",c="",s="";null!=o&&(o.forEach((function(e){c=e.nameCourse,r=e.approximation,l=e.gradeObjective,console.log("nota-objetivo",l),s=e._id,c===t&&(a=e.grades,console.log("data-final",o))})),e.asignarNotasCurso(a,r,l,c,s),e.setState({allCourses:n}))}))}},{key:"fetchGlobalCourses",value:function(){var e=this,t=[];fetch("http://localhost:3001/courses").then((function(e){return e.json()})).then((function(a){a.forEach((function(e){var a=e.name;t.push(a)})),e.setState({globalCourses:t})}))}},{key:"addGrade",value:function(){var e=this;if(this.state._id){var t=this.state.course,a=this.state._id,n=this.state.nombreNota,o=this.state.calificacionActual,r=this.state.porcentaje,l=this.state.grades,c=this.state.allCourses,s=0;l.forEach((function(e){if(e._id===a){e={_id:a,nameGrade:n,currentGrade:o,percentage:r},l[s]=e,console.log("cambiado",e);var i=0;c.forEach((function(e){e.nameCourse===t&&(c[i].grades=l),i+=1})),s+=1}fetch("http://localhost:3001/students/".concat(localStorage.getItem("email")),{method:"PATCH",body:JSON.stringify({courses:c}),headers:{Accept:"application/json","Content-Type":"application/json"}})})),this.setState({grades:l,_id:"",nombreNota:"",calificacionActual:"",porcentaje:""},(function(){document.getElementById("nombreNota").value=e.state.nombreNota,document.getElementById("calificacionActual").value=e.state.calificacionActual,document.getElementById("porcentaje").value=e.state.porcentaje}))}else{var i=this.state.grades,u=this.state.nombreNota,m=this.state.calificacionActual,d=this.state.porcentaje,p=i.length+1,h=this.state.allCourses,g=this.state.nameCourseAux,b=this.state.course;document.getElementById("nombreNota").value="",document.getElementById("calificacionActual").value="",document.getElementById("porcentaje").value="",i.push({nameGrade:u,currentGrade:m,percentage:d,_id:p}),this.setState({grades:i,nombreNota:"",calificacionActual:"",porcentaje:""},(function(){document.getElementById("nombreNota").value=e.state.nombreNota,document.getElementById("calificacionActual").value=e.state.calificacionActual,document.getElementById("porcentaje").value=e.state.porcentaje,console.log(e.state.grades);var t=localStorage.getItem("email"),a=e.state.gradeObjective;console.log("grade objetive",a),"nuevo"===e.state.course?(console.log("NUEVOOOOO"),h.push({nameCourse:g,grades:i,gradeObjective:a,approximation:"APO"}),console.log(h),fetch("http://localhost:3001/students/".concat(t),{method:"PATCH",body:JSON.stringify({courses:h}),headers:{Accept:"application/json","Content-Type":"application/json"}}),e.setState({course:g})):h.forEach((function(e){e.nameCourse===b&&(e.grades=i,e.nameCourse=g),fetch("http://localhost:3001/students/".concat(t),{method:"PATCH",body:JSON.stringify({courses:h}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.error(e)}))}))}))}}},{key:"editCourse",value:function(e){console.log("EDITAR",e);var t,a=this.state.grades,n=!1;a.forEach((function(a){a._id===e&&(console.log("encontrado",e),n=!0,t=a)})),n&&this.change(e,t)}},{key:"change",value:function(e,t){var a=this;console.log("metodo change",e,t);var n=t.nameGrade,o=t.currentGrade,r=t.percentage;this.setState({_id:e,nombreNota:n,calificacionActual:o,porcentaje:r},(function(){document.getElementById("nombreNota").value=a.state.nombreNota,document.getElementById("calificacionActual").value=a.state.calificacionActual,document.getElementById("porcentaje").value=a.state.porcentaje})),console.log("Fin metodo change:",this.state)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(h.a)({},a,n)),console.log(a,n)}},{key:"render",value:function(){var e=this,t=this.state.grades,a=this.state.globalCourses,n=this.state.course;return o.a.createElement("div",{className:"course",id:"course"},o.a.createElement("br",null),o.a.createElement("div",{className:"fila_uno"},o.a.createElement("div",{className:"col-md-5"},o.a.createElement("label",{for:"inputState"},o.a.createElement("h3",null,"Nombre del Curso")),o.a.createElement("select",{id:"inputState",className:"form-control option-name-course ",name:"nameCourseAux",onChange:this.handleChange},o.a.createElement("option",{selected:!0},n),a.map((function(e){return o.a.createElement("option",null,e)})))),o.a.createElement("button",{type:"button",className:"btn btn-primary boton_agregar",onClick:this.addGrade},"+"),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.estadisticas},"Estadisticas")),o.a.createElement("br",null),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"col-md-3 borde"},o.a.createElement("label",{for:"objectiveGrade"},o.a.createElement("h3",null,"Nota Objetivo")),o.a.createElement("input",{type:"text",className:"form-control input-course",value:this.state.gradeObjective,onChange:this.handleChange,name:"gradeObjective"})),o.a.createElement("label",{for:"test1",className:"checkbox special"},o.a.createElement("input",{type:"checkbox",id:"test1",name:"aproximacion",value:"1",onChange:this.handleChange}),o.a.createElement("span",null,"Aproximaci\xf3n"))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"col-md-3 borde"},o.a.createElement("label",{for:"nombreNota"},o.a.createElement("h3",null,"Nombre Nota")),o.a.createElement("input",{type:"text",className:"form-control input-course",id:"nombreNota",onChange:this.handleChange,name:"nombreNota"})),o.a.createElement("div",{className:"col-md-3 borde"},o.a.createElement("label",{for:"calificacionActual"},o.a.createElement("h3",null,"Calificaci\xf3n Actual")),o.a.createElement("input",{className:"form-control input-course",type:"number",id:"calificacionActual",onChange:this.handleChange,name:"calificacionActual"})),o.a.createElement("div",{className:"col-md-3 borde"},o.a.createElement("label",{for:"porcentaje"},o.a.createElement("h3",null,"Porcentaje")),o.a.createElement("input",{className:"form-control input-course",name:"porcentaje",id:"porcentaje",onChange:this.handleChange}))),o.a.createElement("div",null,t.map((function(t){return o.a.createElement("div",null," ",o.a.createElement(g,{id:t._id,nameGrade:t.nameGrade,currentGrade:t.currentGrade,percentage:t.percentage})," ",o.a.createElement("button",{onClick:function(){return e.editCourse(t._id)},className:"btn btn-primary"},"Editar"))}))))}}]),t}(o.a.Component),f=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e));var n=localStorage.getItem("email");return a.state={courses:[],idCurrentCourse:"",email:n},a.fetchTasks=a.fetchTasks.bind(Object(d.a)(a)),a.actualizar=a.actualizar.bind(Object(d.a)(a)),a.enviarURL=a.enviarURL.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchTasks()}},{key:"actualizar",value:function(e){var t=this;console.log("actualizar"),this.setState({courses:e},(function(){console.log("ACTUALIZADO",t.state)}))}},{key:"enviarURL",value:function(e){var t=this;this.state.idCurrentCourse?this.setState({idCurrentCourse:""},(function(){t.setState({idCurrentCourse:e})})):this.setState({idCurrentCourse:e})}},{key:"fetchTasks",value:function(){var e=this,t=[],a=this.state.email;console.log(a),fetch("http://localhost:3001/students/".concat(a)).then((function(e){return e.json()})).then((function(a){null!=(a=a.courses)&&(a.forEach((function(e){console.log("ciclo",e),t.push(e.nameCourse)})),a=(a=a[0]).nameCourse,console.log("Nombre curso",t),e.actualizar(t))}))}},{key:"render",value:function(){var e=this;if(this.state.idCurrentCourse){var t=this.state.idCurrentCourse;return o.a.createElement("div",{className:"principal"},o.a.createElement("div",{className:"course-list"},o.a.createElement("br",null),o.a.createElement("h1",null,"Mis Cursos"),o.a.createElement("ul",null,this.state.courses.map((function(t){return o.a.createElement("h4",{id:t,onClick:function(){return e.enviarURL(t)}},t)}))),o.a.createElement("hr",null),o.a.createElement("button",{id:"nuevo",className:"btn btn-light nuevoCurso",onClick:function(){return e.enviarURL("nuevo")}},"Nuevo")),o.a.createElement(b,{idCourse:t}))}return o.a.createElement("div",null,o.a.createElement("div",{className:"course-list"},o.a.createElement("br",null),o.a.createElement("h1",null,"Mis Cursos"),o.a.createElement("ul",null,this.state.courses.map((function(t){return o.a.createElement("h4",{id:t,onClick:function(){return e.enviarURL(t)}},t)}))),o.a.createElement("hr",null),o.a.createElement("button",{className:"btn btn-light nuevoCurso",onClick:function(){return e.enviarURL("nuevo")}},"Nuevo")))}}]),t}(o.a.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"principal"},o.a.createElement(f,null))}}]),t}(o.a.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null!=localStorage.getItem("loggeado")?o.a.createElement("div",{className:"App"},o.a.createElement(p,{log:"true"}),o.a.createElement("br",null),o.a.createElement(v,null)):o.a.createElement("div",{className:"App"},o.a.createElement(p,null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"centrado"},o.a.createElement("img",{src:"https://firebasestorage.googleapis.com/v0/b/proyectodiana-b940e.appspot.com/o/a-.png?alt=media&token=0e907819-25db-490c-922e-76c410412be6",alt:"aaa"}),o.a.createElement("div",null,"Icons made by"," ",o.a.createElement("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"},"Freepik")," ","from"," ",o.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com"))),o.a.createElement("br",null))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.9d5c6289.chunk.js.map